@(page: models.pages.Page, siteName: String, siteNav: List[models.pages.Page], widgetRowsHtml: List[List[play.api.templates.Html]], isAdmin: Boolean = true)
@import views.html.sites.widgets._
@import models.pages.Page
@import models.widgets._
@import controllers._
@main(page.title){
@if(isAdmin) {
	@views.html.loggedInNavBar(siteName)
}
<div id="pageId-@page.pageId"></div>
<div class="container@if(isAdmin){ roomForHeader}">
	<div class="row">
		<div class="col-lg-2">
			@views.html.sites.navigation(siteNav)
		</div>
		<div class="col-lg-10">
			<div class="container" @if(isAdmin){id="insertPoint" name="insertPoint"}>
				@widgetRowsHtml.zipWithIndex.map { case(columns, index) =>
				<div class="container">
					<div class="row" id="row@(index+1)">
						@columns.map { theWidgetHtml =>
						<div class="col-lg-@(12/columns.length)">
							@theWidgetHtml
						</div>
						}
					</div>	
					@if(isAdmin) {
					<div data-bind="if:editing">
						<div class="row">
							<div class="col-lg-12">
								<div class="btn-group pull-right">
									<button type="button" class="btn btn-default btn-mini dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-edit"></span></button>
									<ul class="dropdown-menu" data-bind="foreach: widgetTypes">
										<li><a tabindex="-1" href="#" data-bind="text: menuText,click:function(data, event){$parent.insertWidget(@(index+1),data)}"></a></li>
									</ul>
								</div>
							</div>
						</div>
					</div>
					}
				</div>
				}
			</div>
		</div>
	</div>
	<hr>
	<footer>
		<p>&copy; @siteName 2013</p>
	</footer>
</div>
}