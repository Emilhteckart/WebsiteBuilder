@(siteName: String, siteNav: List[models.pages.PageMongoWithId], pageMongo: models.pages.PageMongoWithId, isAdmin: Boolean = true)
@import views.html.sites.widgets._
@import models.pages._
@import models.widgets._
@import controllers._
@main(pageMongo.page.title){
@if(isAdmin) {
	@views.html.loggedInNavBar(siteName)
<div id="siteId-@(pageMongo.page.siteId)"></div>
<div id="pageId-@((pageMongo._id \ "$oid").as[String])"></div>
}
<div class="container@if(isAdmin){ roomForHeader}">
	<div class="row">
		<div class="col-lg-2">
			@views.html.sites.navigation(siteNav)
		</div>
		<div class="col-lg-10">
			<div class="container" @if(isAdmin){id="insertPoint"}>
				@pageMongo.page.rows.zipWithIndex.map { case(row, index) =>
				<div class="container">
					<div class="row" id="row@(index)">
						@row.columns.zipWithIndex.map { case(column, index) =>
						<div class="col-lg-@(12/row.columns.length)" id="column@(index)">
							@views.html.sites.widgets.textWidget(column)
						</div>
						}
					</div>	
					@if(isAdmin) {
					<div data-bind="if:editing">
						<div class="row">
							<div class="col-lg-12">
								<div class="btn-group pull-right">
									<button type="button" class="btn btn-default btn-mini dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-edit"></span></button>
									<ul class="dropdown-menu">
										<li><a tabindex="-1" href="#" data-bind="text: 'Insert column',click:function(){insertWidget(@(index))}"></a></li>
										<li><a tabindex="-1" href="#" data-bind="click:insertHeader">Header (h4)</a></li>
									</ul>
								</div>
							</div>
						</div>
					</div>
					}
				</div>
				}
			</div>
		</div>
	</div>
	<hr>
	<footer>
		<p>&copy; @siteName 2013</p>
	</footer>
</div>
}