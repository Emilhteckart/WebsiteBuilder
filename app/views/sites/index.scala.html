@(siteName: String, siteNav: List[models.pages.Page], pageMongo: models.pages.PageMongoWithId, isAdmin: Boolean = true)
@import views.html.sites.widgets._
@import models.pages._
@import models.widgets._
@import controllers._
@main(pageMongo.page.title){
@if(isAdmin) {
	@views.html.loggedInNavBar(siteName)
}
<div id="pageId-@pageMongo._id"></div>
<div class="container@if(isAdmin){ roomForHeader}">
	<div class="row">
		<div class="col-lg-2">
			@views.html.sites.navigation(siteNav)
		</div>
		<div class="col-lg-10">
			<div class="container" @if(isAdmin){id="insertPoint" name="insertPoint"}>
				@pageMongo.page.rows.zipWithIndex.map { case(row, index) =>
				<div class="container">
					<div class="row" id="row@(index+1)">
						@row.columns.map { column =>
						<div class="col-lg-@(12/row.columns.length)">
							@views.html.sites.widgets.textWidget(column)
						</div>
						}
					</div>	
					@if(isAdmin) {
					<div data-bind="if:editing">
						<div class="row">
							<div class="col-lg-12">
								<div class="btn-group pull-right">
									<button type="button" class="btn btn-default btn-mini dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-edit"></span></button>
									<ul class="dropdown-menu">
										<!-- ko foreach: widgetTypes -->
										<li><a tabindex="-1" href="#" data-bind="text: menuText,click:function(data, event){$parent.insertWidget(@(index+1),data)}"></a></li>
										<!-- /ko -->
										<li><a tabindex="-1" href="#" data-bind="click:insertHeader">Header (h4)</a></li>
									</ul>
								</div>
							</div>
						</div>
					</div>
					}
				</div>
				}
			</div>
		</div>
	</div>
	<hr>
	<footer>
		<p>&copy; @siteName 2013</p>
	</footer>
</div>
}